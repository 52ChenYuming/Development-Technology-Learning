<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <title>网格布局</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    .masonry {
      padding: 10px;
      display: grid;
      /* 设置每一列的宽度占比 */
      grid-template-columns: 1fr 2fr 1fr;
      /* 设置每一行的高度占比 */
      /* grid-template-rows: 1fr 2fr 1fr; */
      /* 列宽5px */
      column-gap: 5px;
      /* 设置网格的行高 */
      grid-auto-rows: 10px;
    }

    .item {
      /* 网格距离上边框的距离 */
      grid-row-start: auto;
      /* grid-row-end: span 2; */
    }

    .item img {
      width: 100%;
    }

    .item .title {
      display: block;
      padding: 5px;
    }
  </style>
</head>

<body>
  <div class="page" id="app">
    <div class="masonry">
      <img class="item" v-for="item in data" :src="item.img" :url="item.img" alt="">
    </div>
  </div>

  <script>
    // const data = import('./data.js')
    let app = new Vue({
      el: '#app',
      data: {
        data: [
          {
            "id": 0,
            "value": "Consequatur in ipsa ab sapiente enim. Accusantium aut est voluptas sequi. Quibusdam neque aperiam dolor. Excepturi sunt a minus fuga autem excepturi cupiditate. Fuga aspernatur incidunt aliquid.",
            "img": "https://i.pinimg.com/236x/7f/24/8c/7f248c9e18abe79de0d6c79617e03361.jpg"
          },
          {
            "id": 1,
            "value": "Sit qui consequuntur vel quibusdam sit ea sint. Repellendus unde ducimus sed dolor sint iste. Expedita voluptas iste adipisci eos. Impedit dignissimos ratione animi dolorem est.",
            "img": "https://i.pinimg.com/236x/a6/cd/0a/a6cd0a15d5b2909539dd7944201127d2.jpg"
          },
          {
            "id": 2,
            "value": "Fugiat deserunt doloremque molestiae veritatis beatae aut. Eveniet voluptas sunt accusamus. Quis quos hic itaque. Eveniet est repellendus. Odit sed sint. Repellendus est et.",
            "img": "https://i.pinimg.com/236x/d7/fb/60/d7fb60b2321149a83ab5dbe94744ced6.jpg"
          },
          {
            "id": 3,
            "value": "Quas et fuga eos ducimus reprehenderit necessitatibus. Molestiae fuga maiores nobis id. Id debitis id dignissimos magni repellendus quae. Neque aut officia quia dolorem consequatur facilis esse. Ipsam et in aut est voluptatibus qui labore. Esse qui harum dolores.",
            "img": "https://i.pinimg.com/236x/44/d4/c3/44d4c397ff1831222a32620006d3e4ae.jpg"
          },
          {
            "id": 4,
            "value": "Eligendi mollitia est alias molestiae et voluptas ut natus aliquid. Dolorem autem saepe. Accusamus quae quia excepturi iure sint eum vitae. Voluptas rerum soluta rerum ex unde.",
            "img": "https://i.pinimg.com/236x/44/cb/7f/44cb7fc19131e851f639f6e24acbdec6.jpg"
          },
          {
            "id": 5,
            "value": "Provident rerum fugiat qui. Soluta eos reiciendis alias rerum et sunt animi commodi. Omnis temporibus quia accusantium laudantium distinctio porro nostrum dolores voluptas. Quibusdam assumenda laudantium exercitationem ipsam.Quia repellendus ut a ea sed recusandae debitis.In velit odit alias quod est nulla maxime est reprehenderit.",
            "img": "https://i.pinimg.com/236x/65/aa/58/65aa58f9ec28f1a889a2cce245d23110.jpg"
          },
          {
            "id": 6,
            "value": "Aliquam laborum sit ipsam. Odit possimus culpa voluptatem.",
            "img": "https://i.pinimg.com/236x/3d/90/bc/3d90bc862205b58b4cba9d8ccf2ada3d.jpg"
          },
          {
            "id": 7,
            "value": "Veritatis eum aut officiis ut libero sed accusantium neque mollitia. Quisquam velit ratione adipisci at quos officiis nulla porro.Expedita soluta iure accusamus eius modi accusantium temporibus. Cumque omnis et.Voluptatem officiis labore molestiae nostrum numquam quia.Dolorem itaque et maiores atque beatae.",
            "img": "https://i.pinimg.com/236x/6a/b0/d9/6ab0d93ee045cde3a25b5a0a22cd6435.jpg"
          },
          {
            "id": 8,
            "value": "Magnam dolor vel reprehenderit. Tenetur perspiciatis nam rerum quo molestias eligendi itaque atque.Reprehenderit laboriosam qui ipsam dolorum hic.Aut enim odit tempore et sed saepe dignissimos.Praesentium sapiente optio aut consequatur et est.Quaerat nam enim natus consequuntur temporibus.",
            "img": "https://i.pinimg.com/236x/0f/41/f6/0f41f6073f27a4c8baf57d26f76b4b9a.jpg"
          },
          {
            "id": 9,
            "value": "Sed et rerum tenetur. Veritatis blanditiis harum aut voluptatem unde quisquam neque ab quod.Doloribus sequi adipisci at quae amet molestiae voluptatem impedit expedita.Iusto nam unde molestiae enim deserunt quos.Quasi voluptatem amet voluptatibus eius et.",
            "img": "https://i.pinimg.com/236x/ce/87/3b/ce873bc16d0e03cf21ab687d9d3c8ced.jpg"
          },
          {
            "id": 10,
            "value": "Dicta dolor dolorem repellendus perspiciatis. Voluptates ut consequatur eos quaerat laudantium.Molestias atque magnam tempora numquam molestias distinctio et maxime.",
            "img": "https://i.pinimg.com/236x/a1/2b/ab/a12babee7999f15e09d908fb2bcbdf52.jpg"
          },
          {
            "id": 11,
            "value": "Quo eos voluptas expedita incidunt. Non esse explicabo ut voluptates fugit omnis alias. Et non voluptatum repellendus in ut.Qui sunt voluptatem hic aut.",
            "img": "https://i.pinimg.com/236x/21/c4/d3/21c4d38cd1401a12add89d309fc7940a.jpg"
          },
          {
            "id": 12,
            "value": "Blanditiis hic nostrum illum culpa quia commodi molestiae ab. Sed esse enim perspiciatis quasi.Nemo maiores delectus quod.Est inventore aut.",
            "img": "https://i.pinimg.com/236x/d8/e5/8b/d8e58b3064f8978657f9453a2d981285.jpg"
          },
          {
            "id": 13,
            "value": "Et rem aut in non libero magnam tempora nihil. Iste id maiores quis ut. Qui eum eveniet consequatur saepe praesentium minus eius ad ea.Magnam et temporibus.",
            "img": "https://i.pinimg.com/236x/a9/54/d0/a954d0c3d6d1273663688fbe1c137f43.jpg"
          },
          {
            "id": 14,
            "value": "Maxime neque et aut sapiente nesciunt odio vel. Non vero officiis. Facilis occaecati similique voluptate nisi.Sit ab et autem iste enim est in.Hic sunt sapiente autem qui nostrum at iure.",
            "img": "https://i.pinimg.com/236x/09/16/e0/0916e0231fc99916097e68ef08c6cdc0.jpg"
          },
          {
            "id": 15,
            "value": "Et id impedit soluta deserunt qui laboriosam exercitationem in. Consequatur qui quae ducimus omnis laboriosam et alias.",
            "img": "https://i.pinimg.com/236x/d1/35/a2/d135a2e4595c9c4906cd966e60b5b258.jpg"
          },
          {
            "id": 16,
            "value": "Molestias dolores totam molestiae dolor esse et voluptatem iste. Ea delectus quasi.",
            "img": "https://i.pinimg.com/236x/91/7a/bd/917abd60da8e94fd0d47c40b26ffe708.jpg"
          },
          {
            "id": 17,
            "value": "Est in eius eos autem. Doloremque dignissimos ut libero non eaque voluptatibus corrupti totam.Nihil porro dolor dolores eaque rem odit.Saepe optio aut voluptatem ipsa placeat in.Vero neque ea distinctio.Consequatur veniam soluta a maiores nihil omnis deleniti.",
            "img": "https://i.pinimg.com/236x/f0/b6/97/f0b69750e29d91d16d65ca8416ae733b.jpg"
          },
          {
            "id": 18,
            "value": "Qui quisquam atque nisi ut natus inventore eos sint. Debitis vitae illo sit expedita. Minima culpa et voluptas sit labore est aut necessitatibus aliquam.Voluptatem corporis nobis qui molestiae cum quasi voluptas sapiente.",
            "img": "https://i.pinimg.com/236x/3e/b4/3b/3eb43ba65ff82d73789efe17f578dc01.jpg"
          },
          {
            "id": 19,
            "value": "Ut soluta velit. Tempore vel qui natus laboriosam voluptatem quo pariatur non. Reiciendis aut tempore dolores voluptas dolores.Assumenda est sed qui dolore nulla officia nemo aut iusto.",
            "img": "https://i.pinimg.com/236x/11/7a/6e/117a6e2927fe1570b9adc368c56a8ec3.jpg"
          },
          {
            "id": 20,
            "value": "Qui voluptatem quia officiis eaque explicabo. Iste dolor eligendi nostrum sit.",
            "img": "https://i.pinimg.com/236x/fa/5c/10/fa5c10edc931449a4ddbfe6b9d586d2a.jpg"
          },
          {
            "id": 21,
            "value": "Distinctio modi maiores velit inventore autem nihil. Sed suscipit voluptas enim numquam beatae quis sint.Ut ut saepe eum reiciendis.",
            "img": "https://i.pinimg.com/236x/f8/5a/6b/f85a6b268ff3414bdb138646a452a694.jpg"
          },
          {
            "id": 22,
            "value": "Accusantium qui natus. Corrupti dignissimos eligendi dolores. Dolorum in quos est qui.",
            "img": "https://i.pinimg.com/236x/da/3f/83/da3f83eeb605e15eb4c1f125dc21a166.jpg"
          },
          {
            "id": 23,
            "value": "Sint harum beatae sit. Eaque aut qui qui maxime ut. Saepe et quasi.",
            "img": "https://i.pinimg.com/236x/3f/ea/d6/3fead6de23b01bc12f45e5a5516bfd51.jpg"
          },
          {
            "id": 24,
            "value": "Et esse quam nostrum culpa neque id. Placeat nemo similique expedita. Quos quae quae et odit dolores.",
            "img": "https://i.pinimg.com/236x/37/12/2e/37122e4159c30f7357c10fd10e89df33.jpg"
          },
          {
            "id": 25,
            "value": "Molestias quas dolor et possimus. Laboriosam recusandae atque veniam explicabo quis cumque asperiores omnis vitae.Tempora sint illo similique.Cum aspernatur tempore eligendi harum aperiam qui et eius.Quisquam ea accusantium voluptates enim.Est culpa sed voluptatibus et inventore similique expedita.",
            "img": "https://i.pinimg.com/236x/4b/47/9d/4b479da98b733dfdd6e77da226c574c8.jpg"
          },
          {
            "id": 26,
            "value": "Voluptatem est totam aspernatur veritatis ad et incidunt qui. Rerum maxime neque officia cumque voluptatem.Ad nihil velit illum voluptatibus.Reprehenderit occaecati voluptas ut unde.",
            "img": "https://i.pinimg.com/236x/2c/f3/18/2cf31837d7f18b6ae4f6009c6375f8bd.jpg"
          },
          {
            "id": 27,
            "value": "Fugit sapiente voluptatem recusandae. Aspernatur excepturi modi. Quas dolor autem aliquid error et quae commodi quis consectetur.Rerum eos et natus aliquid quia sit est non aperiam.",
            "img": "https://i.pinimg.com/236x/22/b8/79/22b8798fcc2d33a705ef162308fdc286.jpg"
          },
          {
            "id": 28,
            "value": "Pariatur dignissimos inventore ullam nulla adipisci nostrum voluptatem voluptatibus. Eius asperiores et earum possimus optio nobis.Possimus sunt minus voluptas sed.Aut reiciendis vel sed officiis ea corrupti veritatis odit odit.Excepturi qui et laborum quia.",
            "img": "https://i.pinimg.com/236x/d8/44/72/d844725ad8295a7f6d0d66b764ab239a.jpg"
          },
          {
            "id": 29,
            "value": "Dolore labore quasi explicabo qui eum similique dignissimos voluptas. Tempore non culpa ducimus explicabo et illo perspiciatis.Eligendi dolores corrupti asperiores consectetur.Doloribus nulla debitis assumenda eos quo aliquam enim beatae aut.",
            "img": "https://i.pinimg.com/236x/8d/c4/7b/8dc47b2bb33f302ffd1a3742223cefc2.jpg"
          },
          {
            "id": 30,
            "value": "Tempora in voluptas et quasi laborum quidem corporis maiores. Fuga quia consequuntur exercitationem.Nulla beatae et sed.Veniam illo labore magni ut corporis.",
            "img": "https://i.pinimg.com/236x/eb/78/7b/eb787b84a432329896575aecdc3b20cd.jpg"
          }
        ]
      }
    })

  </script>
  <script>
    let imgArr = document.getElementsByTagName('img');
    // let width = img.width;
    // console.log(width);
    Array.from(imgArr).forEach((img, index) => {
      let src = img.getAttribute('url');
      let image = new Image();
      image.src = src;
      let width = img.width;
      img.onload = function () {
        let w = image.width;
        let h = image.height;
        let height = Math.round(h * width / w);
        img.src = src;
        img.style.gridRowEnd = `span ${~~(height / 10)}`;
        console.log(height);
      }
      // console.log(src);
    });
  </script>

</body>

</html>